(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{35:function(e,t,a){e.exports=a(70)},40:function(e,t,a){},67:function(e,t){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(33),r=a.n(o),i=(a(40),a(1)),c=a(2),m=a(3),l=a(5),k=a(4),_=a(34),d=a.n(_),h=function(e){Object(l.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleName=function(e){n.setState({name:e.target.value})},n.handleRoom=function(e){n.setState({room:e.target.value})},n.handleFormSubmit=function(e){var t=n.state,a=t.name,s=t.room;e.preventDefault(),a&&s?n.props.joinRoom(a,s):n.setState({form_submit:!0})},n.state={name:"",room:"",form_submit:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.room,n=e.form_submit;return s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},s.a.createElement("div",{id:"join",style:{width:400,height:250,backgroundColor:"#d9d9ff",display:"flex",justifyContent:"center",alignItems:"center",borderBlockColor:"#7373ff"}},s.a.createElement("form",{onSubmit:this.handleFormSubmit},s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement("label",null,"Name ",s.a.createElement("sup",{style:{color:"#ff0000"}},"*")),s.a.createElement("input",{type:"text",name:"name",value:t,placeholder:"name",onChange:this.handleName}),!!n&&!t&&s.a.createElement("span",{className:"error-txt",style:{color:"#ff0000"}},"empty name!")),s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement("label",null,"Room ",s.a.createElement("sup",{style:{color:"#ff0000"}},"*")),s.a.createElement("input",{type:"text",name:"room",value:a,placeholder:"room",onChange:this.handleRoom}),!!n&&!a&&s.a.createElement("span",{className:"error-txt",style:{color:"#ff0000"}},"empty room!")),s.a.createElement("button",{onSubmit:this.handleFormSubmit,style:{marginTop:15}},"Join"))))}}]),a}(n.Component),u=a(7),f=a(6);function p(e){return s.a.createElement("div",null,e.snake_dots.map((function(e,t){var a={left:"".concat(e[0],"%"),top:"".concat(e[1],"%"),borderRadius:"50%"};return s.a.createElement("div",{key:t,className:"snake-dot",style:a})})))}function b(e){var t={left:"".concat(e.food[0],"%"),top:"".concat(e.food[1],"%"),borderRadius:"50%"};return s.a.createElement("div",{className:"snake-food",style:t})}var v=function(e){Object(l.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={time_left:100},n.timer=null,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState({time_left:e.state.time_left-1}),0===e.state.time_left&&(clearInterval(e.timer),e.props.onGameOver(!1))}),1e3)}},{key:"render",value:function(){var e=this.state.time_left;return s.a.createElement("h1",{style:{marginLeft:"auto",color:e<10?"red":"green"}},"Time Left:",e," sec")}}]),a}(n.Component),g={food:[50,50],speed:200,hide_food:!1,snake_1:{direction:"RIGHT",snake_dots:[[0,0],[2,0]]},snake_2:{direction:"RIGHT",snake_dots:[[10,10],[12,10]]}},O=function(e){Object(l.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).moveSnake=function(){requestAnimationFrame((function(){var e=n.state.snake_1,t=n.state.snake_2,a=Object(f.a)(e.snake_dots),s=Object(f.a)(t.snake_dots),o=a[a.length-1],r=s[s.length-1];switch(e.direction){case"RIGHT":o=[o[0]+2,o[1]];break;case"LEFT":o=[o[0]-2,o[1]];break;case"DOWN":o=[o[0],o[1]+2];break;case"UP":o=[o[0],o[1]-2]}switch(t.direction){case"RIGHT":r=[r[0]+2,r[1]];break;case"LEFT":r=[r[0]-2,r[1]];break;case"DOWN":r=[r[0],r[1]+2];break;case"UP":r=[r[0],r[1]-2]}a.push(o),s.push(r),a.shift(),s.shift(),n.setState({snake_1:Object(i.a)(Object(i.a)({},e),{},{snake_dots:a}),snake_2:Object(i.a)(Object(i.a)({},t),{},{snake_dots:s})})}))},n.onKeyDown=function(e){var t=n.state[n.props.my_snake],a=t.direction,s={};switch((e=e||window.event).keyCode){case 40:"UP"!=a&&(s=Object(u.a)({},n.props.my_snake,Object(i.a)(Object(i.a)({},t),{},{direction:"DOWN"})));break;case 38:"DOWN"!=a&&(s=Object(u.a)({},n.props.my_snake,Object(i.a)(Object(i.a)({},t),{},{direction:"UP"})));break;case 39:"LEFT"!=a&&(s=Object(u.a)({},n.props.my_snake,Object(i.a)(Object(i.a)({},t),{},{direction:"RIGHT"})));break;case 37:"RIGHT"!=a&&(s=Object(u.a)({},n.props.my_snake,Object(i.a)(Object(i.a)({},t),{},{direction:"LEFT"})))}n.snake_game.emit("move_snake",{state:s,room:n.props.room})},n.checkIfEatAnotherSnake=function(){var e=n.state[n.props.my_snake],t=e.snake_dots[e.snake_dots.length-1],a=[];(a="snake_1"===n.props.my_snake?Object(f.a)(n.state.snake_2.snake_dots):Object(f.a)(n.state.snake_1.snake_dots)).pop(),a.forEach((function(e){t[0]==e[0]&&t[1]==e[1]&&n.onGameOver(!0)}))},n.checkIfHeadCollapse=function(){var e=Object(f.a)(n.state.snake_1.snake_dots[n.state.snake_1.snake_dots.length-1]),t=Object(f.a)(n.state.snake_2.snake_dots[n.state.snake_2.snake_dots.length-1]);e[0]==t[0]&&e[1]==t[1]&&n.onGameOver(!1)},n.onGameOver=function(e){var t="";t=("snake_1"===n.props.my_snake?n.props.snake_2:n.props.snake_1)+"won as "+n.props[n.props.my_snake]+"'s snake dead",e||(t=n.state.snake_1.snake_dots.length>n.state.snake_2.snake_dots.length?n.props.snake_1+" won by"+(n.state.snake_1.snake_dots.length-n.state.snake_2.snake_dots.length)+" points":n.state.snake_1.snake_dots.length<n.state.snake_2.snake_dots.length?n.props.snake_2+" won by"+(n.state.snake_2.snake_dots.length-n.state.snake_1.snake_dots.length)+" points":"Match Draw"),n.snake_game.emit("game_over",{message:t,room:n.props.room})},n.state=Object(i.a)(Object(i.a)({},g),{},{highest_score:0,speed:e.speed||g.speed}),n.speed=e.speed||g.speed,n.snake_game=n.props.snake_game,n.snake_game.on("move_snake",(function(e){n.setState(Object(i.a)({},e))})),n.snake_game.on("eat_food",(function(e){n.setState(Object(i.a)(Object(i.a)({},e),{},{hide_food:!1}))})),n.snake_game.on("enlarge_snake",(function(e){n.setState(Object(i.a)(Object(i.a)({},e),{},{hide_food:!1}))})),n.snake_game.on("increase_game_speed",(function(e){n.setState(Object(i.a)({},e))})),n.snake_game.on("game_over",(function(e){alert(e),n.props.gameOver()})),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){setInterval(this.moveSnake,this.state.speed),document.onkeydown=this.onKeyDown}},{key:"componentDidUpdate",value:function(){this.checkIfOutOfBorders(),this.checkIfCollapsed(),this.checkIfEat(),this.checkIfEatAnotherSnake(),this.checkIfHeadCollapse()}},{key:"checkIfOutOfBorders",value:function(){var e=this.state[this.props.my_snake],t=e.snake_dots[e.snake_dots.length-1];(t[0]>=100||t[1]>=100||t[0]<0||t[1]<0)&&this.onGameOver(!0)}},{key:"checkIfCollapsed",value:function(){var e=this,t=Object(f.a)(this.state[this.props.my_snake].snake_dots),a=t[t.length-1];t.pop(),t.forEach((function(t){a[0]==t[0]&&a[1]==t[1]&&e.onGameOver(!0)}))}},{key:"checkIfEat",value:function(){var e=this.state[this.props.my_snake],t=e.snake_dots[e.snake_dots.length-1],a=this.state.food;t[0]==a[0]&&t[1]==a[1]&&(this.setState({hide_food:!0,food:[0,0]}),this.snake_game.emit("eat_food",{state:{food:[2*Math.floor((98*Math.random()+1)/2),2*Math.floor((98*Math.random()+1)/2)]},room:this.props.room}),this.enlargeSnake(),this.increaseSpeed())}},{key:"enlargeSnake",value:function(){var e=this.state[this.props.my_snake],t=Object(f.a)(e.snake_dots);t.unshift([]),t.unshift([]),t.unshift([]),t.unshift([]),t.unshift([]),this.snake_game.emit("enlarge_snake",{state:Object(u.a)({},this.props.my_snake,Object(i.a)(Object(i.a)({},e),{},{snake_dots:t})),room:this.props.room})}},{key:"increaseSpeed",value:function(){this.state.speed>10&&this.snake_game.emit("increase_game_speed",{state:{speed:this.state.speed-10},room:this.props.room})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("h1",null,this.props.snake_1,":",this.state.snake_1.snake_dots.length-g.snake_1.snake_dots.length),s.a.createElement(v,{onGameOver:this.onGameOver}),s.a.createElement("h1",{style:{marginLeft:"auto"}},this.props.snake_2,":",this.state.snake_2.snake_dots.length-g.snake_2.snake_dots.length)),s.a.createElement("div",{className:"game-area"},s.a.createElement(p,{snake_dots:this.state.snake_1.snake_dots}),s.a.createElement(p,{snake_dots:this.state.snake_2.snake_dots}),!this.state.hide_food&&s.a.createElement(b,{food:this.state.food})))}}]),a}(n.Component),j=function(e){Object(l.a)(a,e);var t=Object(k.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},s.a.createElement("p",null,"You have successfully joined this room, please wait for another player to start"))}}]),a}(n.Component),y=function(e){Object(l.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).joinRoom=function(e,t){n.setState({user_detail:{name:e,room:t},join_room:!0}),n.snake_game.emit("request_to_join_room",{room:t,name:e})},n.gameOver=function(){n.setState({join_room:!1,user_detail:{name:"",room:""},start_game:!1,my_snake:null,snake_1:"",snake_2:""})},n.state={join_room:!1,user_detail:{name:"",room:""},start_game:!1,my_snake:null,snake_1:"",snake_2:""},n.snake_game=d.a.connect("https://node-snake-game-server-new.herokuapp.com/games"),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.snake_game.on("room_is_full",(function(e){alert(e)})),this.snake_game.on("joined_room",(function(t){e.setState({my_snake:t}),console.log(t)})),this.snake_game.on("start_game",(function(t){e.setState(Object(i.a)({start_game:!0},t))}))}},{key:"render",value:function(){var e=this.state,t=e.join_room,a=e.user_detail,n=e.start_game,o=e.my_snake,r=e.snake_1,i=e.snake_2;return s.a.createElement(s.a.Fragment,null,!n&&!t&&s.a.createElement(h,Object.assign({joinRoom:this.joinRoom},a)),!n&&t&&s.a.createElement(j,null),n&&t&&s.a.createElement(O,Object.assign({},a,{my_snake:o,snake_game:this.snake_game,snake_1:r,snake_2:i,gameOver:this.gameOver})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.615eb574.chunk.js.map